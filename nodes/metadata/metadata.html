<script type="text/javascript">
    RED.nodes.registerType('metadata', {
        category: 'Watson Designer',
        color: '#a6bbcf',
        defaults: {
            name: {
                value: ""
            }
        },
        inputs: 0,
        outputs: 1,
        icon: "comment.svg",
        label: function() {
            return this.name || "metadata";
        },
        button: {
            enabled: function() {
                return !this.changed
            },
            onclick: function() {
                if (this.changed) {
                    return RED.notify(RED._("notification.warning", {
                        message: RED._("notification.warnings.undeployedChanges")
                    }), "warning");
                }
                // var payload = this.payload;
                // if ((this.payloadType === 'flow') ||
                //     (this.payloadType === 'global')) {
                //     var key = RED.utils.parseContextKey(payload);
                //     payload = this.payloadType + "." + key.key;
                // }
                // var label = this._def.label.call(this);
                // if (label.length > 30) {
                //     label = label.substring(0, 50) + "...";
                // }
                // label = label.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
                // var node = this;
                // $.ajax({
                //     url: "inject/" + this.id,
                //     type: "POST",
                //     success: function(resp) {
                //         RED.notify(node._("inject.success", {
                //             label: label
                //         }), {
                //             type: "success",
                //             id: "inject"
                //         });
                //     },
                //     error: function(jqXHR, textStatus, errorThrown) {
                //         if (jqXHR.status == 404) {
                //             RED.notify(node._("common.notification.error", {
                //                 message: node._("common.notification.errors.not-deployed")
                //             }), "error");
                //         } else if (jqXHR.status == 500) {
                //             RED.notify(node._("common.notification.error", {
                //                 message: node._("inject.errors.failed")
                //             }), "error");
                //         } else if (jqXHR.status == 0) {
                //             RED.notify(node._("common.notification.error", {
                //                 message: node._("common.notification.errors.no-response")
                //             }), "error");
                //         } else {
                //             RED.notify(node._("common.notification.error", {
                //                 message: node._("common.notification.errors.unexpected", {
                //                     status: jqXHR.status,
                //                     message: textStatus
                //                 })
                //             }), "error");
                //         }
                //     }
                // });
            }
        }
    });
</script>

<script type="text/html" data-template-name="metadata">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-row">
        <label for="hosting_instance"><i class="icon-tag"></i>Instance</label>
        <input type="text" id="hosting_instance" placeholder="Instance">
    </div>
    <div class="form-row" style="margin-bottom:12px">
        <button type="button" style="float:right; margin-right:8%; margin-bottom:12px" class="ui-button ui-corner-all ui-widget" name="Instance">Generate Instance</button>
    </div>

    <div class="form-row">
        <label for="watson-api-key"><i class="icon-tag"></i>Watson</label>
        <input type="text" id="watson-api-key" placeholder="API-key">
    </div>
    <div class="form-row" style="margin-bottom:12px">
        <button type="button" style="float:right; margin-right:8%; margin-bottom:12px" class="ui-button ui-corner-all ui-widget" name="Watson_Key">Generate Key</button>
    </div>
    <div class="form-row">
        <label for="ta-api-key"><i class="icon-tag"></i>Tone Analyser</label>
        <input type="text" id="ta-api-key" placeholder="API-key">

    </div>
    <div class="form-row" style="margin-bottom:12px">
        <button type="button" style="float:right; margin-right:8%; margin-bottom:12px" class=" ui-button ui-corner-all ui-widget" name="TA_Key">Generate Key</button>
    </div>
    <div class="form-row">
        <label for="discovery-api-key"><i class="icon-tag"></i>Discovery </label>
        <input type="text" id="discovery-api-key" placeholder="API-key">
    </div>
    <div class="form-row">
        <button type="button" style="float:right; margin-right:8%; margin-bottom:12px" class="ui-button ui-corner-all ui-widget" name="Discovery_Key">Generate Key</button>
    </div>
</script>

<script type="text/html" data-help-name="metadata">
    <p>A simple node that converts the message payloads into all lower-case characters</p>
</script>